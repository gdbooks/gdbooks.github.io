<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>On Your Own | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.3.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../Chapter9.html" />
    
    
    <link rel="prev" href="../Chapter8.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="6.1" data-basepath=".." data-revision="Fri Sep 18 2015 13:20:50 GMT-0700 (Pacific Daylight Time)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Chapter1.html">
            
                
                    <a href="../Chapter1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Starting Out
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="Game.html">
            
                
                    <a href="../Game.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Game
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Program.html">
            
                
                    <a href="../Program.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Program
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Chapter2.html">
            
                
                    <a href="../Chapter2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Why Tiles?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Chapter3.html">
            
                
                    <a href="../Chapter3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Map Format
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Chapter6.html">
            
                
                    <a href="../Chapter6.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Creating Tiles
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Practice/PracticeCh6.html">
            
                
                    <a href="../Practice/PracticeCh6.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        On Your Own
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Chapter5.html">
            
                
                    <a href="../Chapter5.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Map Tools
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Chapter8.html">
            
                
                    <a href="../Chapter8.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        The Hero
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="6.1" data-path="Practice/PracticeTheHero.html">
            
                
                    <a href="../Practice/PracticeTheHero.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        On Your Own
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Chapter9.html">
            
                
                    <a href="../Chapter9.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Keys To Move
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Practice/PracticeMoving.html">
            
                
                    <a href="../Practice/PracticeMoving.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        On Your Own
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Chapter10.html">
            
                
                    <a href="../Chapter10.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Hit The Wall
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="Chapter11.html">
            
                
                    <a href="../Chapter11.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Open The Door
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="cleanup.html">
            
                
                    <a href="../cleanup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Cleaning Up
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="borders.html">
            
                
                    <a href="../borders.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Screen Borders
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="Chapter12.html">
            
                
                    <a href="../Chapter12.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Jumping
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="jumpconfig.html">
            
                
                    <a href="../jumpconfig.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Configurable Jumping
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="Chapter13.html">
            
                
                    <a href="../Chapter13.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Clouds
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="Chapter15.html">
            
                
                    <a href="../Chapter15.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Simple Enemy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="Chapter16.html">
            
                
                    <a href="../Chapter16.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        X More Enemy
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="Chapter17.html">
            
                
                    <a href="../Chapter17.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        X Shooting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="Chapter18.html">
            
                
                    <a href="../Chapter18.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        X Getting Items
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="Chapter19.html">
            
                
                    <a href="../Chapter19.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        X Moving Tiles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="Chapter20.html">
            
                
                    <a href="../Chapter20.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        X Scrolling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="Chapter21.html">
            
                
                    <a href="../Chapter21.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        X More Scrolling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="Chapter22.html">
            
                
                    <a href="../Chapter22.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        X Depth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="Chapter23.html">
            
                
                    <a href="../Chapter23.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        X Ismetric View
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="Chapter24.html">
            
                
                    <a href="../Chapter24.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        X Mouse To Move
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="Chapter25.html">
            
                
                    <a href="../Chapter25.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        X Iso Mouse
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="Chapter26.html">
            
                
                    <a href="../Chapter26.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        X Iso Scroll
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="Chapter27.html">
            
                
                    <a href="../Chapter27.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        X Rotating Hero
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="25" data-path="Chapter28.html">
            
                
                    <a href="../Chapter28.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>25.</b>
                        
                        X Rotating Ground
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="26" data-path="Chapter29.html">
            
                
                    <a href="../Chapter29.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>26.</b>
                        
                        X Slopes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="27" data-path="Chapter30.html">
            
                
                    <a href="../Chapter30.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>27.</b>
                        
                        X Hexagons
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="28" data-path="Chapter7.html">
            
                
                    <a href="../Chapter7.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>28.</b>
                        
                        X More Tiles
                    </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="on-your-own">On Your Own</h1>
<p>The Character class we created in <strong>The Hero</strong> section works ok for what we need, but it&apos;s very static. By this i mean there are only ever 4 images, and even then the one that is to be displayed needs to be hard coded. Let&apos;s fix this. In this section we&apos;re going to make the hero more dynamic.</p>
<h3 id="think-about-it">Think about it</h3>
<p>How would you solve this problem? I&apos;m going to present my solution below, but it&apos;s by no means the best or only way to tackle the problem. Before reading my answer think about how you would solve this problem. Maybe try to implement it! If you do come up with your own implementation, i want to see it! You can also use my implementation as a guide, and not follow it verbatim. Or you can do what  i do, this is a  learning experience!</p>
<h3 id="new-project">New Project</h3>
<p>Create a new project, call it <strong>HeroPractice</strong>. We will be continuing from the <strong>The Hero</strong> section, make sure that the new project is up to date / par with that.</p>
<h3 id="changing-the-hero">Changing the hero</h3>
<p>Any time you hear the word dynamic, you should probably start thinking about a <a href="https://goo.gl/BCUxAT" target="_blank">Dictionary</a> (Hash table). Dictionary&apos;s allow us to get super customizable by having dynamic string keys. We&apos;re going to re-do the <strong>Character</strong> class with dictionary support.</p>
<p>First, remove the following variables from the character class:</p>
<ul>
<li>facingDownFrame1</li>
<li>facingLeftFrame1</li>
<li>facingRightFrame1</li>
<li>displaySourceRect</li>
</ul>
<p>Add a new dictionary, the key should be a string, the value should be a rectangle. I would call this dictionary <strong>spriteSources</strong>, but the name is up to you. Also, add a string. Again what you call the string is up to you, i call mine <strong>currentSprite</strong>.</p>
<p>The idea here is pretty simple, we will be able to add any number of sprites to the <strong>Character</strong> object, and reference them by strings thanks to our new dictionary. Only one of these sprites will display at a time, and it will be the one that has the same key as <strong>currenSprite</strong>.</p>
<p>We don&apos;t want these variables to be just randomly set, make sure they are private. Next, make the following helper metod in the <strong>Character</strong> class:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddSprite</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> name, Rectangle source</span>) </span>{
</code></pre>
<p>This method should add a new entry into the <strong>spriteSources</strong> dictionary. If <strong>currentSprite</strong> has not been set yet (If it&apos;s null or empty), set <strong>currentSprite</strong> to be the <strong>name</strong> argument. This way if at least one sprite is added it will be displayed by default no matter what.</p>
<p>Also add this helper method:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetSprite</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> name</span>) </span>{
</code></pre>
<p><strong>SetSprite</strong> should check if the <strong>name</strong> argument exists as a key inside the <strong>spriteSources</strong> dictionary. If it does set the <strong>currentSprite</strong> variable equal to the <strong>name</strong> argument. If not, do nothing.</p>
<p>Last, update your <strong>Render</strong> function. It should display a sprite out of the <strong>spriteSources</strong> dictionary. IF the <strong>currentSprite</strong> string has not been set (If it&apos;s null or empty), early out and draw nothing (as the dictionary access would trigger an NRE).</p>
<h3 id="end-result">End result</h3>
<p>The <strong>Initialize</strong> method of my <strong>Progra.cs</strong> looks like this:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>(<span class="hljs-params"></span>) </span>{
    TextureManager.Instance.UseNearestFiltering = <span class="hljs-keyword">true</span>;
    map = GenerateMap(mapLayout, spriteSheets, spriteSources);
    hero = <span class="hljs-keyword">new</span> Character(heroSheet, <span class="hljs-keyword">new</span> Point(SpawnTile.X * <span class="hljs-number">30</span>, SpawnTile.Y * <span class="hljs-number">30</span>));

    hero.AddSprite(<span class="hljs-string">&quot;Down&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">59</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Up&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">115</span>, <span class="hljs-number">3</span>, <span class="hljs-number">22</span>, <span class="hljs-number">28</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Left&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>));
    hero.AddSprite(<span class="hljs-string">&quot;Right&quot;</span>, <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">195</span>, <span class="hljs-number">1</span>, <span class="hljs-number">26</span>, <span class="hljs-number">30</span>));
}
</code></pre>
<p>And i added this to <strong>Update</strong> so i could test:</p>
<pre><code class="lang-cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"><span class="hljs-keyword">float</span> dt</span>) </span>{
    InputManager i = InputManager.Instance; <span class="hljs-comment">// Local reference to input manager</span>
    <span class="hljs-comment">// ^ I only use the reference to save on space below</span>

    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Left) || i.KeyDown(OpenTK.Input.Key.A)) {
        hero.SetSprite(<span class="hljs-string">&quot;Left&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Right) || i.KeyDown(OpenTK.Input.Key.D)) {
        hero.SetSprite(<span class="hljs-string">&quot;Right&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Up) || i.KeyDown(OpenTK.Input.Key.W)) {
        hero.SetSprite(<span class="hljs-string">&quot;Up&quot;</span>);
    }
    <span class="hljs-keyword">if</span> (i.KeyDown(OpenTK.Input.Key.Down) || i.KeyDown(OpenTK.Input.Key.S)) {
        hero.SetSprite(<span class="hljs-string">&quot;Down&quot;</span>);
    }
}
</code></pre>
<p>Even tough link still doesn&apos;t move the arrow keys (and WASD) now make him turn in different directions :)</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Chapter8.html" class="navigation navigation-prev " aria-label="Previous page: The Hero"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Chapter9.html" class="navigation navigation-next " aria-label="Next page: Keys To Move"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
